Linux学习笔记(一)--分区与启动

Linux分区：

	MBR第一扇区：(开机管理程序记录区与分区表--512bytes)
		~主要启动记录区(Master Boot Record, MBR)：可以安装开机管理程序的地方，有 446 bytes
		~分区表(partition table)：记录整颗硬盘分区的状态，有 64 bytes(最多只能有四组记录，每组记录该区段的启始与结束的磁柱号码)
		
	MBR区段信息：
		~其实所谓的『分区』只是针对那个 64 bytes 的分区表进行设定而已！
		~硬盘默认的分区表仅能写入四组分区信息
		~这四组分区信息我们称为主要(Primary)或延伸(Extended)分区槽
		~分区槽的最小单位『通常』为磁柱(cylinder)
		~当系统要写入磁盘时，一定会参考磁盘分区表，才能针对某个分区槽进行数据的处理
		
	分区的意义：
		~数据的安全性  系统的效能考虑

	MBR主要分区、延伸分区与逻辑分区的特性：
		~主要分区与延伸分区最多可以有四笔(硬盘的限制)
		~延伸分区最多只能有一个(操作系统的限制)
		~逻辑分区是由延伸分区持续切割出来的分区槽
		~能够被格式化后，作为数据存取的分区槽为主要分区与逻辑分区，延伸分区无法格式化
		~逻辑分区的数量依操作系统而不同，在 Linux 系统中 SATA 硬盘已经可以突破 63 个以上的分区限制

	MBR分区限制：		
		~操作系统无法抓取到 2.2T 以上的磁盘容量！
		~MBR 仅有一个区块，若被破坏后，经常无法或很难救援。
		~MBR 内的存放开机管理程序的区块仅 446bytes，无法容纳较多的程序代码。
		
	GPL分区：
		~将磁盘所有区块以LBA(逻辑区块地址，预设为512 bytes)来规划，第一LBA称为LBA0
		~与MBR仅使用第一个512 bytes区块记录不同，GPT使用34个LBA区块记录分区信息
		~GPT除了前面34个LBA之外，整个磁盘最后33个LBA也拿来做另一个备份
		
	GPL各区块说明：
		~LBA0(MBR相容模块)：与MBR模式相似，两个部分---前446 bytes存储第一阶段的开机管理程序，后放入一个特殊标志的分区，表示GPT
		~LBA1(GTP表头记录)：记录分区表本身的位置与大小，同时记录备份用的GPT分区(最后34个LAB块)放置的位置，同时放置了分区表的检
		验机制码(CRC23)，操作系统根据这个验证码来判断GPT是否正确，若有错误则从备份区恢复
		~LBA2-33(实际记录分区信息处)：每个 LBA 都可以纪录 4 笔分区纪录，所以在默认的情况下，总共可以有4*32 = 128笔分区纪录，每
		个 LBA 有 512bytes，因此每笔纪录用到 128bytes 的空间，除了每笔纪录所需要的标识符与相关的纪录之外，GPT 在每笔纪录中分别
		提供了 64bits 来记载开始/结束的扇区号码
		~GPT 分区已经没有所谓的主、延伸、逻辑分区的概念，既然每笔纪录都可以独立存在，当然每个都可以视为是主分区！每一个分区都可
		以拿来格式化使用

		
Linux开机流程：

	boot loader主要任务：
		~提供选单：用户可以选择不同的开机项目，这也是多重引导的重要功能
		~载入核心文件：直接向可开机的程序区段来开始操作系统
		~转交其他loader：将开机管理程序转交给其他loader负责
		
	多重引导的原因：
		~每个分区槽都拥有自己的启动扇区(boot sector)
		~图中的系统槽为第一及第二分区槽(linux and windows)
		~实际可开机的核心文件是放置到各分区槽内的
		~loader只会认识自己的系统槽内的可开机核心文件,以及其他 loader 而已
		~loader可直接指向或者是间接将管理权转交给另一个管理程序

	CMOS 是记录各项硬件参数且嵌入在主板上面的储存器，BIOS 则是一个写入到主板上的一个韧体(韧体就是写入到硬件上的一个软件程序)
	
	BIOS是在开机时，计算机系统会主动执行的第一个程序，接下来BIOS会去分析计算机里面有哪些存储设备，BIOS会依据使用者的设定去取得
	能够开机的硬盘，并到硬盘里面读取第一个扇区的MBR位置。MBR 这个仅有446 bytes的硬盘容量里面会放置最基本的开机管理程序，此时BI
	-OS就功成圆满，接下来就是MBR内的开机管理程序的工作了。开机管理程序的目的是在加载(load)核心文件，由于开机管理程序是操作系统
	在安装的时候所提供的，所以他会认识硬盘内的文件系统格式，因此就能够读取核心文件，然后接下来就是核心文件的工作，开机管理程序
	与 BIOS 也功成圆满，将之后的工作就交给大家所知道的操作系统啦！
	
	BIOS 搭配 MBR/GPT 的开机流程
		1. BIOS：开机主动执行的韧体，会认识第一个可开机的装置；
		2. MBR：第一个可开机装置的第一个扇区内的主要启动记录区块，内含开机管理程序；
		3. 开机管理程序(boot loader)：一支可读取核心文件来执行的软件；
		4. 核心文件：开始操作系统的功能...


Linux安装：

	~CentOs7将MBR模式改成GPT模式---选择【Install CentOS 7】并按下【Tab】键 输入：inst.gpt
	
	